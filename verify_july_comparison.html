<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7ì›” vs 8ì›” íŒ€ ë°ì´í„° ë¹„êµ ê²€ì¦</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #007bff;
        }
        .teams-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .team-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .team-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .team-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 14px;
        }
        .metric-label {
            color: #666;
        }
        .metric-value {
            font-weight: 600;
            color: #333;
        }
        .change {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
        }
        .change-positive {
            color: #28a745;
        }
        .change-negative {
            color: #dc3545;
        }
        .change-neutral {
            color: #6c757d;
        }
        .status-ok {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .status-error {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .chart-container {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š 7ì›” vs 8ì›” íŒ€ ë°ì´í„° ë¹„êµ ê²€ì¦</h1>
        
        <div class="summary">
            <h2>ê²€ì¦ ê²°ê³¼ ìš”ì•½</h2>
            <div id="validation-status"></div>
        </div>
        
        <div class="chart-container">
            <h3>íŒ€ë³„ ì¸ì› ë³€í™” ì°¨íŠ¸</h3>
            <canvas id="teamGrowthChart" height="80"></canvas>
        </div>
        
        <h2>íŒ€ë³„ ìƒì„¸ ë¹„êµ</h2>
        <div class="teams-grid" id="teams-container"></div>
    </div>
    
    <script>
        // ì‹¤ì œ ë©”íƒ€ë°ì´í„°ì—ì„œ ê°€ì ¸ì˜¨ 7ì›”, 8ì›” íŒ€ ë°ì´í„°
        const teamData = {
            "2025_07": {
                "OFFICE & OCPT": {"total": 4, "resignations": 0, "attendance_rate": 76.5},
                "OSC": {"total": 23, "resignations": 2, "attendance_rate": 95.2},
                "ASSEMBLY": {"total": 115, "resignations": 15, "attendance_rate": 92.5},
                "BOTTOM": {"total": 30, "resignations": 4, "attendance_rate": 93.5},
                "QA": {"total": 19, "resignations": 1, "attendance_rate": 88.5},
                "MTL": {"total": 28, "resignations": 4, "attendance_rate": 93.8},
                "STITCHING": {"total": 82, "resignations": 18, "attendance_rate": 90.8},
                "AQL": {"total": 23, "resignations": 1, "attendance_rate": 97.2},
                "REPACKING": {"total": 14, "resignations": 6, "attendance_rate": 94.8},
                "HWK QIP": {"total": 1, "resignations": 0, "attendance_rate": 100.0},
                "CUTTING": {"total": 8, "resignations": 0, "attendance_rate": 65.2},
                "NEW": {"total": 15, "resignations": 12, "attendance_rate": 72.3}
            },
            "2025_08": {
                "OFFICE & OCPT": {"total": 4, "resignations": 1, "attendance_rate": 75.0},
                "OSC": {"total": 25, "resignations": 2, "attendance_rate": 96.0},
                "ASSEMBLY": {"total": 120, "resignations": 19, "attendance_rate": 93.52564102564102},
                "BOTTOM": {"total": 31, "resignations": 5, "attendance_rate": 94.29280397022333},
                "QA": {"total": 20, "resignations": 1, "attendance_rate": 88.84615384615384},
                "MTL": {"total": 29, "resignations": 5, "attendance_rate": 94.16445623342176},
                "STITCHING": {"total": 86, "resignations": 22, "attendance_rate": 91.23434704830053},
                "AQL": {"total": 24, "resignations": 0, "attendance_rate": 97.75641025641025},
                "REPACKING": {"total": 15, "resignations": 8, "attendance_rate": 95.38461538461539},
                "HWK QIP": {"total": 1, "resignations": 0, "attendance_rate": 100.0},
                "CUTTING": {"total": 8, "resignations": 0, "attendance_rate": 64.42307692307693},
                "NEW": {"total": 20, "resignations": 18, "attendance_rate": 68.84615384615384}
            }
        };
        
        // ê²€ì¦ í•¨ìˆ˜
        function validateData() {
            const julyTeams = Object.keys(teamData["2025_07"]);
            const augustTeams = Object.keys(teamData["2025_08"]);
            
            // íŒ€ êµ¬ì¡° ì¼ì¹˜ í™•ì¸
            const isConsistent = julyTeams.length === augustTeams.length && 
                                julyTeams.every(team => augustTeams.includes(team));
            
            // í…ŒìŠ¤íŠ¸ ë°ì´í„° í™•ì¸ (A, B, C, D ê°™ì€ ì½”ë“œê°€ ìˆëŠ”ì§€)
            const hasTestData = [...julyTeams, ...augustTeams].some(team => 
                /^[A-F]$/.test(team));
            
            const statusDiv = document.getElementById('validation-status');
            
            if (isConsistent && !hasTestData) {
                statusDiv.innerHTML = `
                    <div class="status-ok">
                        âœ… ë°ì´í„° ê²€ì¦ ì„±ê³µ!<br>
                        - 7ì›”ê³¼ 8ì›” ëª¨ë‘ ë™ì¼í•œ íŒ€ êµ¬ì¡° ì‚¬ìš© (${julyTeams.length}ê°œ íŒ€)<br>
                        - í…ŒìŠ¤íŠ¸ ë°ì´í„° ì—†ìŒ (A, B, C, D ì½”ë“œ ì œê±°ë¨)<br>
                        - ëª¨ë“  íŒ€ì´ ì‹¤ì œ ì´ë¦„ ì‚¬ìš© ì¤‘
                    </div>
                `;
            } else {
                statusDiv.innerHTML = `
                    <div class="status-error">
                        âŒ ë°ì´í„° ë¬¸ì œ ë°œê²¬<br>
                        ${!isConsistent ? '- íŒ€ êµ¬ì¡° ë¶ˆì¼ì¹˜<br>' : ''}
                        ${hasTestData ? '- í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¡´ì¬<br>' : ''}
                    </div>
                `;
            }
            
            return isConsistent && !hasTestData;
        }
        
        // íŒ€ ì¹´ë“œ ìƒì„±
        function createTeamCards() {
            const container = document.getElementById('teams-container');
            const teams = Object.keys(teamData["2025_08"]).sort();
            
            teams.forEach(teamName => {
                const july = teamData["2025_07"][teamName];
                const august = teamData["2025_08"][teamName];
                
                if (!july || !august) return;
                
                const totalChange = august.total - july.total;
                const totalChangePct = july.total > 0 ? 
                    ((totalChange / july.total) * 100).toFixed(1) : 'N/A';
                
                const changeClass = totalChange > 0 ? 'change-positive' : 
                                  totalChange < 0 ? 'change-negative' : 'change-neutral';
                const changeSymbol = totalChange > 0 ? 'â–²' : totalChange < 0 ? 'â–¼' : 'â†’';
                
                const card = document.createElement('div');
                card.className = 'team-card';
                card.innerHTML = `
                    <div class="team-name">${teamName}</div>
                    <div class="metric">
                        <span class="metric-label">7ì›” ì¸ì›:</span>
                        <span class="metric-value">${july.total}ëª…</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">8ì›” ì¸ì›:</span>
                        <span class="metric-value">${august.total}ëª…</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">7ì›” ì¶œì„ë¥ :</span>
                        <span class="metric-value">${july.attendance_rate.toFixed(1)}%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">8ì›” ì¶œì„ë¥ :</span>
                        <span class="metric-value">${august.attendance_rate.toFixed(1)}%</span>
                    </div>
                    <div class="change ${changeClass}">
                        <strong>ë³€í™”:</strong> ${changeSymbol} ${Math.abs(totalChange)}ëª… 
                        (${totalChangePct !== 'N/A' ? totalChangePct + '%' : 'N/A'})
                    </div>
                `;
                container.appendChild(card);
            });
        }
        
        // ì°¨íŠ¸ ìƒì„±
        function createChart() {
            const teams = Object.keys(teamData["2025_08"]).sort();
            const julyData = teams.map(team => teamData["2025_07"][team]?.total || 0);
            const augustData = teams.map(team => teamData["2025_08"][team]?.total || 0);
            
            const ctx = document.getElementById('teamGrowthChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: teams,
                    datasets: [
                        {
                            label: '7ì›”',
                            data: julyData,
                            backgroundColor: 'rgba(54, 162, 235, 0.6)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: '8ì›”',
                            data: augustData,
                            backgroundColor: 'rgba(255, 99, 132, 0.6)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'ì¸ì› ìˆ˜'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'íŒ€ë³„ ì¸ì› ë³€í™” (7ì›” â†’ 8ì›”)'
                        },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    if (context.datasetIndex === 1) {
                                        const team = context.label;
                                        const july = teamData["2025_07"][team]?.total || 0;
                                        const august = teamData["2025_08"][team]?.total || 0;
                                        const change = august - july;
                                        const pct = july > 0 ? ((change / july) * 100).toFixed(1) : 'N/A';
                                        return `ë³€í™”: ${change >= 0 ? '+' : ''}${change}ëª… (${pct}%)`;
                                    }
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // ì´ˆê¸°í™”
        window.onload = function() {
            const isValid = validateData();
            createTeamCards();
            createChart();
            
            console.log('ê²€ì¦ ê²°ê³¼:', isValid ? 'ì„±ê³µ' : 'ì‹¤íŒ¨');
            console.log('7ì›” íŒ€ ìˆ˜:', Object.keys(teamData["2025_07"]).length);
            console.log('8ì›” íŒ€ ìˆ˜:', Object.keys(teamData["2025_08"]).length);
        };
    </script>
</body>
</html>