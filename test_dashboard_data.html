<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Data Test</title>
</head>
<body>
    <h1>Dashboard Data Test</h1>
    <div id="results"></div>

    <script>
        // Open the Version 6 dashboard first, then this page
        // This will check if data is loaded

        const results = document.getElementById('results');

        if (window.opener || parent.window.employeeData) {
            results.innerHTML = '<p style="color: green;">Parent window detected</p>';
        }

        // Try to access employeeData if this is opened from console
        if (typeof employeeData !== 'undefined') {
            results.innerHTML += `<p style="color: green;">employeeData found: ${employeeData.length} employees</p>`;

            // Count by type
            const type1 = employeeData.filter(e => e['ROLE TYPE STD'] === 'TYPE-1').length;
            const type2 = employeeData.filter(e => e['ROLE TYPE STD'] === 'TYPE-2').length;
            const type3 = employeeData.filter(e => e['ROLE TYPE STD'] === 'TYPE-3').length;

            results.innerHTML += `
                <p>TYPE-1: ${type1}</p>
                <p>TYPE-2: ${type2}</p>
                <p>TYPE-3: ${type3}</p>
                <p>Total with incentive: ${employeeData.filter(e => e['Final Incentive amount'] > 0).length}</p>
                <p>Total incentive: ${employeeData.reduce((sum, e) => sum + (e['Final Incentive amount'] || 0), 0).toLocaleString()} VND</p>
            `;
        } else {
            results.innerHTML = '<p style="color: red;">employeeData not found. Open the dashboard first and check console.</p>';
            results.innerHTML += '<p>Try running this in the dashboard console:</p>';
            results.innerHTML += '<pre>console.log("employeeData:", window.employeeData?.length);\nconsole.log("translations:", translations);\nconsole.log("Dashboard Data:", window.dashboardData);</pre>';
        }
    </script>
</body>
</html>