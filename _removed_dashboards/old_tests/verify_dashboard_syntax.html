<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Syntax Verification</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .status-section {
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .test-results {
            margin-top: 20px;
        }
        pre {
            background: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Dashboard JavaScript Syntax Verification</h1>
        
        <div class="status-section info">
            <h2>ê²€ì¦ ë°©ë²•</h2>
            <p>ì´ í˜ì´ì§€ëŠ” ëŒ€ì‹œë³´ë“œì˜ JavaScript êµ¬ë¬¸ ì˜¤ë¥˜ë¥¼ ìë™ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤.</p>
            <ol>
                <li>ëŒ€ì‹œë³´ë“œë¥¼ iframeìœ¼ë¡œ ë¡œë“œí•©ë‹ˆë‹¤</li>
                <li>JavaScript ì˜¤ë¥˜ë¥¼ ê°ì§€í•©ë‹ˆë‹¤</li>
                <li>ì½˜ì†” ë¡œê·¸ë¥¼ ìº¡ì²˜í•©ë‹ˆë‹¤</li>
                <li>ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤</li>
            </ol>
        </div>
        
        <div class="test-controls">
            <button onclick="testDashboard()">ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
            <button onclick="openDashboard()">ëŒ€ì‹œë³´ë“œ ì§ì ‘ ì—´ê¸°</button>
        </div>
        
        <div id="test-results" class="test-results"></div>
    </div>
    
    <script>
        let errorCount = 0;
        let warningCount = 0;
        let logs = [];
        
        // ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬
        window.addEventListener('error', function(event) {
            errorCount++;
            const errorMsg = `Error: ${event.message} at ${event.filename}:${event.lineno}:${event.colno}`;
            logs.push(errorMsg);
            console.error('Captured error:', errorMsg);
        });
        
        function testDashboard() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="status-section info"><h3>í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...</h3></div>';
            
            errorCount = 0;
            warningCount = 0;
            logs = [];
            
            // iframe ìƒì„±í•˜ì—¬ ëŒ€ì‹œë³´ë“œ ë¡œë“œ
            const iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = 'output_files/management_dashboard_2025_08.html';
            
            iframe.onload = function() {
                // iframe ë‚´ë¶€ ì˜¤ë¥˜ í™•ì¸
                try {
                    const iframeWindow = iframe.contentWindow;
                    
                    // iframe ë‚´ ì—ëŸ¬ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                    iframeWindow.addEventListener('error', function(event) {
                        errorCount++;
                        logs.push(`Iframe Error: ${event.message} at line ${event.lineno}`);
                    });
                    
                    // ì ì‹œ ëŒ€ê¸° í›„ ê²°ê³¼ í‘œì‹œ
                    setTimeout(() => {
                        displayResults();
                        document.body.removeChild(iframe);
                    }, 3000);
                    
                } catch (e) {
                    resultsDiv.innerHTML = `
                        <div class="status-section error">
                            <h3>âŒ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜</h3>
                            <p>${e.message}</p>
                        </div>
                    `;
                    if (iframe.parentNode) {
                        document.body.removeChild(iframe);
                    }
                }
            };
            
            iframe.onerror = function() {
                resultsDiv.innerHTML = `
                    <div class="status-section error">
                        <h3>âŒ ëŒ€ì‹œë³´ë“œ ë¡œë“œ ì‹¤íŒ¨</h3>
                        <p>Dashboard íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
            };
            
            document.body.appendChild(iframe);
        }
        
        function displayResults() {
            const resultsDiv = document.getElementById('test-results');
            
            if (errorCount === 0) {
                resultsDiv.innerHTML = `
                    <div class="status-section success">
                        <h3>âœ… ê²€ì¦ ì„±ê³µ!</h3>
                        <p>JavaScript êµ¬ë¬¸ ì˜¤ë¥˜ê°€ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                        <p>ëŒ€ì‹œë³´ë“œê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = `
                    <div class="status-section error">
                        <h3>âŒ ì˜¤ë¥˜ ë°œê²¬</h3>
                        <p>${errorCount}ê°œì˜ JavaScript ì˜¤ë¥˜ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                        <h4>ì˜¤ë¥˜ ëª©ë¡:</h4>
                        <pre>${logs.join('\n')}</pre>
                    </div>
                `;
            }
            
            // ì¶”ê°€ ì •ë³´
            resultsDiv.innerHTML += `
                <div class="status-section info">
                    <h3>ğŸ“Š ê²€ì¦ ìš”ì•½</h3>
                    <ul>
                        <li>í…ŒìŠ¤íŠ¸ ì‹œê°„: ${new Date().toLocaleString('ko-KR')}</li>
                        <li>ì˜¤ë¥˜ ê°œìˆ˜: ${errorCount}</li>
                        <li>ê²½ê³  ê°œìˆ˜: ${warningCount}</li>
                        <li>ëŒ€ì‹œë³´ë“œ íŒŒì¼: management_dashboard_2025_08.html</li>
                    </ul>
                </div>
            `;
        }
        
        function openDashboard() {
            window.open('output_files/management_dashboard_2025_08.html', '_blank');
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.onload = function() {
            console.log('Dashboard Syntax Verification Tool Loaded');
        };
    </script>
</body>
</html>