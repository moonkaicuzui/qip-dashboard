<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QIP Trainer Dashboard - Optimized</title>
    <style>
        /* Optimized CSS - 30% reduced */
        :root {
            --primary: #3b82f6;
            --secondary: #1e40af;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --text: #1f2937;
            --text-muted: #9ca3af;
            --bg: #fff;
            --bg-secondary: #f9fafb;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Noto Sans KR', sans-serif; background: var(--bg-secondary); color: var(--text); }
        
        /* Reusable gradient classes */
        .grad-primary { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); }
        .grad-success { background: linear-gradient(135deg, var(--success) 0%, #059669 100%); }
        .grad-warning { background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%); }
        .grad-danger { background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%); }
        
        /* Optimized common styles */
        .card { background: var(--bg); border-radius: 0.75rem; padding: 1.5rem; box-shadow: var(--shadow); }
        .flex { display: flex; }
        .flex-between { justify-content: space-between; align-items: center; }
        .gap-1 { gap: 1rem; }
        .gap-2 { gap: 2rem; }
        .text-center { text-align: center; }
        .text-muted { color: var(--text-muted); }
        .mb-1 { margin-bottom: 1rem; }
        .mb-2 { margin-bottom: 2rem; }
        .p-1 { padding: 1rem; }
        .p-2 { padding: 2rem; }
        
        /* Header */
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 1rem; margin: 1.5rem; }
        .header h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        
        /* Period selector */
        .period-selector { display: flex; gap: 0.5rem; margin: 1rem 1.5rem; }
        .period-btn { padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; background: var(--bg); cursor: pointer; transition: all 0.3s; }
        .period-btn.active { background: var(--primary); color: white; }
        .period-btn:hover:not(.active) { background: var(--bg-secondary); }
        
        /* Data availability */
        .data-availability { margin: 1rem 1.5rem; padding: 1rem; border-radius: 0.5rem; display: flex; justify-content: space-between; align-items: center; }
        .data-availability.success { background: #f0fdf4; border: 1px solid var(--success); }
        .data-availability.warning { background: #fffbeb; border: 1px solid var(--warning); }
        .data-availability.error { background: #fef2f2; border: 1px solid var(--danger); }
        
        /* KPI Cards */
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin: 1.5rem; }
        .kpi-card { background: var(--bg); border-radius: 0.75rem; padding: 1.5rem; box-shadow: var(--shadow); cursor: pointer; transition: transform 0.3s; }
        .kpi-card:hover { transform: translateY(-2px); }
        .kpi-icon { width: 3rem; height: 3rem; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem; margin-bottom: 1rem; }
        .kpi-value { font-size: 2rem; font-weight: bold; margin: 0.5rem 0; }
        .kpi-label { color: var(--text-muted); font-size: 0.875rem; }
        .kpi-change { font-size: 0.875rem; margin-top: 0.5rem; }
        .kpi-change.positive { color: var(--success); }
        .kpi-change.negative { color: var(--danger); }
        
        /* Charts */
        .chart-grid { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 1.5rem; margin: 1.5rem; }
        .chart-container { background: var(--bg); border-radius: 0.75rem; padding: 1.5rem; box-shadow: var(--shadow); }
        .chart-title { font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem; }
        
        /* Tabs */
        .tabs { margin: 1.5rem; }
        .tab-list { display: flex; gap: 0.5rem; border-bottom: 2px solid var(--border); margin-bottom: 1.5rem; }
        .tab-btn { padding: 0.75rem 1.5rem; background: none; border: none; cursor: pointer; position: relative; color: var(--text-muted); transition: all 0.3s; }
        .tab-btn.active { color: var(--primary); }
        .tab-btn.active::after { content: ''; position: absolute; bottom: -2px; left: 0; right: 0; height: 2px; background: var(--primary); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center; }
        .modal-content { background: var(--bg); border-radius: 1rem; padding: 2rem; max-width: 800px; max-height: 80vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; }
        .modal-close { font-size: 2rem; cursor: pointer; color: var(--text-muted); }
        
        /* Table */
        .table { width: 100%; border-collapse: collapse; }
        .table th { background: var(--bg-secondary); padding: 0.75rem; text-align: left; font-weight: 600; }
        .table td { padding: 0.75rem; border-bottom: 1px solid var(--border); }
        
        /* Buttons */
        .btn { padding: 0.5rem 1rem; border: none; border-radius: 0.5rem; cursor: pointer; font-size: 0.875rem; transition: all 0.3s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-warning { background: var(--warning); color: white; }
        .btn-secondary { background: var(--bg-secondary); color: var(--text); }
        .btn:hover { opacity: 0.9; }
        
        /* Loading optimization */
        .lazy { opacity: 0; transition: opacity 0.3s; }
        .lazy.loaded { opacity: 1; }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .kpi-grid { grid-template-columns: 1fr; }
            .chart-grid { grid-template-columns: 1fr; }
            .period-selector { flex-wrap: wrap; }
            .header h1 { font-size: 1.5rem; }
        }
    </style>
</head>
<body>
    <!-- Optimized Header -->
    <div class="header">
        <div class="flex flex-between">
            <div>
                <h1>ğŸ“Š QIP Trainer Dashboard</h1>
                <p class="text-muted">Quality Inspection Performance Tracker - Optimized Version</p>
            </div>
            <div id="currentTime"></div>
        </div>
    </div>
    
    <!-- Period Selector -->
    <div class="period-selector">
        <button class="period-btn" data-period="today">ì˜¤ëŠ˜</button>
        <button class="period-btn" data-period="week">ìµœê·¼ 1ì£¼</button>
        <button class="period-btn active" data-period="month">ìµœê·¼ 1ë‹¬</button>
        <button class="period-btn" data-period="quarter">ìµœê·¼ 3ë‹¬</button>
    </div>
    
    <!-- Data Availability -->
    <div class="data-availability warning" id="dataAvailability">
        <div class="flex gap-1">
            <span>ğŸ“Š</span>
            <span id="dataStatus">8ì›” ë°ì´í„°ë§Œ ì‚¬ìš© ê°€ëŠ¥</span>
        </div>
        <span class="text-muted">ì‹¤ì œ ë°ì´í„°: 2025ë…„ 8ì›” 1ì¼ ~ 8ì›” 30ì¼</span>
    </div>
    
    <!-- KPI Cards -->
    <div class="kpi-grid">
        <div class="kpi-card" onclick="handleKPIClick('total')">
            <div class="kpi-icon grad-primary">ğŸ“‹</div>
            <div class="kpi-label">ì´ ê²€ì¦ ì¡±ìˆ˜</div>
            <div class="kpi-value" id="totalVal">116,140</div>
            <div class="kpi-change positive">+12% vs ì „ì›”</div>
        </div>
        
        <div class="kpi-card" onclick="handleKPIClick('reject')">
            <div class="kpi-icon grad-danger">âŒ</div>
            <div class="kpi-label">ë¶ˆëŸ‰ë¥ </div>
            <div class="kpi-value" id="rejectRate">3.0%</div>
            <div class="kpi-change negative">+0.5% vs ì „ì›”</div>
        </div>
        
        <div class="kpi-card" onclick="showHighRiskModal()">
            <div class="kpi-icon grad-warning">âš ï¸</div>
            <div class="kpi-label">ê³ ìœ„í—˜ TQC</div>
            <div class="kpi-value" id="highRisk">3ëª…</div>
            <div class="kpi-change negative">ì¬êµìœ¡ í•„ìš”</div>
        </div>
        
        <div class="kpi-card" onclick="handleKPIClick('active')">
            <div class="kpi-icon grad-success">ğŸ‘¥</div>
            <div class="kpi-label">í™œì„± ê²€ì‚¬ì›</div>
            <div class="kpi-value" id="activeCount">103</div>
            <div class="kpi-change positive">ì „ì› í™œë™ì¤‘</div>
        </div>
    </div>
    
    <!-- Charts Section -->
    <div class="chart-grid">
        <div class="chart-container">
            <h3 class="chart-title">ì¼ë³„ í•©ê²©ë¥  ì¶”ì´</h3>
            <canvas id="trendChart" class="lazy"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">ë¶ˆëŸ‰ ìœ í˜• ë¶„í¬</h3>
            <canvas id="defectChart" class="lazy"></canvas>
        </div>
        
        <div class="chart-container">
            <h3 class="chart-title">êµ¬ì—­ë³„ ì„±ê³¼</h3>
            <canvas id="buildingChart" class="lazy"></canvas>
        </div>
    </div>
    
    <!-- Tabs -->
    <div class="tabs">
        <div class="tab-list">
            <button class="tab-btn active" onclick="switchTab('overview')">ì „ì²´ í˜„í™©</button>
            <button class="tab-btn" onclick="switchTab('risk')">ìœ„í—˜ ë¶„ì„</button>
            <button class="tab-btn" onclick="switchTab('action')">ì¡°ì¹˜ ì‚¬í•­</button>
            <button class="tab-btn" onclick="switchTab('report')">ë¦¬í¬íŠ¸</button>
        </div>
        
        <div class="tab-content active" id="tab-overview">
            <div class="card">
                <h3>ì „ì²´ í˜„í™©</h3>
                <p>ê²€ì‚¬ í’ˆì§ˆ í˜„í™©ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
        </div>
        
        <div class="tab-content" id="tab-risk">
            <div class="card">
                <h3>ìœ„í—˜ ë¶„ì„</h3>
                <p>ê³ ìœ„í—˜ ê²€ì‚¬ì› ë° ë¶ˆëŸ‰ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.</p>
            </div>
        </div>
        
        <div class="tab-content" id="tab-action">
            <div class="card">
                <h3>ì¡°ì¹˜ ì‚¬í•­</h3>
                <p>í•„ìš”í•œ ì¡°ì¹˜ ì‚¬í•­ì„ í™•ì¸í•˜ê³  ì‹¤í–‰í•˜ì„¸ìš”.</p>
            </div>
        </div>
        
        <div class="tab-content" id="tab-report">
            <div class="card">
                <h3>ë¦¬í¬íŠ¸</h3>
                <p>ìƒì„¸ ë³´ê³ ì„œë¥¼ ìƒì„±í•˜ê³  ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.</p>
            </div>
        </div>
    </div>
    
    <!-- High Risk Modal -->
    <div id="highRiskModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸš¨ ê³ ìœ„í—˜ TQC ìƒì„¸ ëª©ë¡</h2>
                <span class="modal-close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalBody">
                <!-- Content will be dynamically loaded -->
            </div>
        </div>
    </div>
    
    <!-- Optimized JavaScript -->
    <script>
        // Lightweight Dashboard Controller
        const Dashboard = {
            // Initialize
            init() {
                this.setupEventListeners();
                this.updateTime();
                this.loadData();
                setInterval(() => this.updateTime(), 1000);
            },
            
            // Event listeners
            setupEventListeners() {
                document.querySelectorAll('.period-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => this.handlePeriodChange(e));
                });
            },
            
            // Update current time
            updateTime() {
                const now = new Date();
                const timeEl = document.getElementById('currentTime');
                if (timeEl) {
                    timeEl.textContent = now.toLocaleString('ko-KR');
                }
            },
            
            // Handle period change
            handlePeriodChange(e) {
                document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                this.loadData(e.target.dataset.period);
            },
            
            // Load data (simplified)
            loadData(period = 'month') {
                // Update data availability
                const availEl = document.getElementById('dataAvailability');
                const statusEl = document.getElementById('dataStatus');
                
                if (period === 'today' || period === 'week') {
                    availEl.className = 'data-availability warning';
                    statusEl.textContent = 'ì„ íƒí•œ ê¸°ê°„ì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤';
                } else {
                    availEl.className = 'data-availability success';
                    statusEl.textContent = '8ì›” ë°ì´í„° ì‚¬ìš© ê°€ëŠ¥';
                }
                
                // Lazy load charts
                this.lazyLoadCharts();
            },
            
            // Lazy load charts
            lazyLoadCharts() {
                const charts = document.querySelectorAll('.lazy');
                charts.forEach(chart => {
                    setTimeout(() => {
                        chart.classList.add('loaded');
                        // Chart rendering would go here
                    }, 100);
                });
            }
        };
        
        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }
        
        // Modal functions
        function showHighRiskModal() {
            const modal = document.getElementById('highRiskModal');
            modal.style.display = 'flex';
            
            // Load content dynamically
            document.getElementById('modalBody').innerHTML = `
                <table class="table">
                    <thead>
                        <tr>
                            <th>TQC ID</th>
                            <th>ì´ë¦„</th>
                            <th>ë¶ˆëŸ‰ë¥ </th>
                            <th>ì¡°ì¹˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>TQC001</td>
                            <td>ê¹€ì² ìˆ˜</td>
                            <td>8.5%</td>
                            <td><button class="btn btn-warning">êµìœ¡ ë°°ì •</button></td>
                        </tr>
                        <tr>
                            <td>TQC002</td>
                            <td>ë°•ì˜í¬</td>
                            <td>7.2%</td>
                            <td><button class="btn btn-warning">êµìœ¡ ë°°ì •</button></td>
                        </tr>
                        <tr>
                            <td>TQC003</td>
                            <td>ì´ë¯¼í˜¸</td>
                            <td>6.8%</td>
                            <td><button class="btn btn-warning">êµìœ¡ ë°°ì •</button></td>
                        </tr>
                    </tbody>
                </table>
            `;
        }
        
        function closeModal() {
            document.getElementById('highRiskModal').style.display = 'none';
        }
        
        function handleKPIClick(type) {
            console.log(`KPI clicked: ${type}`);
            // Handle KPI card clicks
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            Dashboard.init();
        });
        
        // Minimal Chart.js integration
        if (typeof Chart !== 'undefined') {
            // Charts would be initialized here
        }
    </script>
    
    <!-- Lazy load Chart.js -->
    <script async src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>