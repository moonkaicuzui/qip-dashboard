# Version 6 Dashboard Architecture

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ê°œìš”
Version 6ëŠ” Version 5ì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ìœ ì§€í•˜ë©´ì„œ ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ì¬ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ì‚¬ìš©ì ë¸Œë¼ìš°ì €                    â”‚
â”‚         Incentive_Dashboard_Version_6.html       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚   HTML   â”‚           â”‚  JavaScript  â”‚
   â”‚ Template â”‚           â”‚   (Inline)   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    CompleteRenderer     â”‚
    â”‚  (HTML ìƒì„± ì—”ì§„)         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  IncentiveCalculator    â”‚
    â”‚   (ë°ì´í„° ì²˜ë¦¬ ì—”ì§„)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Data Sources        â”‚
    â”‚  â€¢ Excel Files          â”‚
    â”‚  â€¢ JSON Configs         â”‚
    â”‚  â€¢ Google Drive          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
dashboard_v2/
â”œâ”€â”€ modules/                      # í•µì‹¬ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ incentive_calculator.py   # ë°ì´í„° ì²˜ë¦¬ ì—”ì§„ (1,255ì¤„)
â”‚   â””â”€â”€ complete_renderer.py      # HTML ë Œë”ë§ ì—”ì§„ (299ì¤„)
â”‚
â”œâ”€â”€ static/                        # ì •ì  ë¦¬ì†ŒìŠ¤
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ complete_dashboard.css # ìŠ¤íƒ€ì¼ì‹œíŠ¸ (23.31 KB)
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ dashboard_complete.js  # JavaScript (9,293ì¤„, 121 í•¨ìˆ˜)
â”‚
â”œâ”€â”€ templates/                     # HTML í…œí”Œë¦¿ (ë¯¸ì‚¬ìš©, inline ìƒì„±)
â”‚   â””â”€â”€ complete.html
â”‚
â””â”€â”€ tests/                         # í…ŒìŠ¤íŠ¸ ì½”ë“œ
    â”œâ”€â”€ test_calculator.py
    â””â”€â”€ test_renderer.py
```

## ğŸ”§ í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 1. IncentiveCalculator
**ìœ„ì¹˜**: `modules/incentive_calculator.py`
**ì±…ì„**: ëª¨ë“  ë°ì´í„° ì²˜ë¦¬ ë° ì¸ì„¼í‹°ë¸Œ ê³„ì‚°

```python
class IncentiveCalculator:
    def __init__(self, month, year):
        self.month = month
        self.year = year
        self.setup_paths()
        self.load_all_data()

    def process_all_data(self):
        """ëª¨ë“  ë°ì´í„° ì²˜ë¦¬ ë° ë°˜í™˜"""
        return {
            'employees': self.employee_data,
            'stats': self.calculate_stats(),
            'translations': self.translations,
            'condition_matrix': self.condition_matrix,
            'excel_dashboard_data': self.excel_data,
            'config': self.config
        }
```

**ì£¼ìš” ê¸°ëŠ¥**:
- Excel ë°ì´í„° ë¡œë“œ ë° íŒŒì‹±
- ì¸ì„¼í‹°ë¸Œ ì¡°ê±´ í‰ê°€
- í†µê³„ ê³„ì‚°
- JSON ì„¤ì • ê´€ë¦¬
- ë‹¤êµ­ì–´ ë²ˆì—­ ë°ì´í„° ì²˜ë¦¬

### 2. CompleteRenderer
**ìœ„ì¹˜**: `modules/complete_renderer.py`
**ì±…ì„**: HTML ëŒ€ì‹œë³´ë“œ ìƒì„±

```python
class CompleteRenderer:
    def __init__(self):
        self.template_path = Path(__file__).parent.parent / 'templates'
        self.css_path = Path(__file__).parent.parent / 'static' / 'css'
        self.js_path = Path(__file__).parent.parent / 'static' / 'js'

    def render_complete_dashboard(self, month, year):
        """Version 5ì™€ ë™ì¼í•œ HTML ìƒì„±"""
        calculator = IncentiveCalculator(month, year)
        data = calculator.process_all_data()
        return self.generate_html(data)
```

**ì£¼ìš” ê¸°ëŠ¥**:
- HTML êµ¬ì¡° ìƒì„±
- CSS/JS ì¸ë¼ì¸ ì‚½ì…
- ë°ì´í„° JSON ì§ë ¬í™”
- Bootstrap/Chart.js í†µí•©

### 3. JavaScript Engine
**ìœ„ì¹˜**: `static/js/dashboard_complete.js`
**í•¨ìˆ˜ ê°œìˆ˜**: 121ê°œ í•µì‹¬ í•¨ìˆ˜

**ì£¼ìš” í•¨ìˆ˜ ì¹´í…Œê³ ë¦¬**:
```javascript
// ì–¸ì–´ ê´€ë¦¬ (3ê°œ)
changeLanguage(), updateAllTexts(), getTranslation()

// íƒ­ ê´€ë¦¬ (6ê°œ)
showTab(), updateTabContent(), refreshTabData()

// ë°ì´í„° í‘œì‹œ (15ê°œ)
updateTypeSummaryTable(), renderDetailTable(), showEmployeeDetail()

// ì¡°ì§ë„ (8ê°œ)
drawOrgChart(), drawCollapsibleOrgChart(), updateOrgChart()

// ëª¨ë‹¬ ê´€ë¦¬ (12ê°œ)
showModal(), closeModal(), showEmployeeDetailModal()

// í•„í„°ë§ (5ê°œ)
filterTable(), searchEmployees(), applyFilters()

// ì°¨íŠ¸ (10ê°œ)
createChart(), updateChart(), destroyChart()

// ìœ í‹¸ë¦¬í‹° (62ê°œ)
formatNumber(), formatDate(), calculatePercentage()
```

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### 1. ì´ˆê¸° ë¡œë“œ
```
ì‚¬ìš©ì â†’ HTML íŒŒì¼ ì—´ê¸°
      â†’ JavaScript ì´ˆê¸°í™”
      â†’ window.employeeData ë¡œë“œ
      â†’ localStorageì—ì„œ ì–¸ì–´ ì„¤ì • ë³µì›
      â†’ ê¸°ë³¸ íƒ­(ìš”ì•½) í‘œì‹œ
```

### 2. ì–¸ì–´ ì „í™˜
```
ì–¸ì–´ ì„ íƒ â†’ changeLanguage(lang)
         â†’ currentLanguage ì—…ë°ì´íŠ¸
         â†’ updateAllTexts() í˜¸ì¶œ
         â†’ ëª¨ë“  UI ìš”ì†Œ ë²ˆì—­
         â†’ localStorage ì €ì¥
```

### 3. íƒ­ ì „í™˜
```
íƒ­ í´ë¦­ â†’ showTab(tabName)
       â†’ í™œì„± íƒ­ í´ë˜ìŠ¤ ë³€ê²½
       â†’ íƒ­ ì½˜í…ì¸  í‘œì‹œ/ìˆ¨ê¹€
       â†’ í•„ìš”ì‹œ ë°ì´í„° ì—…ë°ì´íŠ¸
       â†’ ì°¨íŠ¸ ì¬ë Œë”ë§
```

## ğŸ¨ UI/UX êµ¬ì¡°

### í—¤ë”
- ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½: `linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- ëŒ€ì‹œë³´ë“œ ì„ íƒê¸° (ìš°ìƒë‹¨)
- ì–¸ì–´ ì„ íƒê¸° (ìš°ìƒë‹¨)
- ì›”/ë…„ë„ ì •ë³´ í‘œì‹œ

### Summary Cards
- 4ê°œ ì¹´ë“œ: ì „ì²´ ì§ì›, ìˆ˜ë ¹ ì§ì›, ì§€ê¸‰ë¥ , ì´ ì§€ê¸‰ì•¡
- ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸
- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ

### íƒ­ ì‹œìŠ¤í…œ
1. **ìš”ì•½**: Typeë³„ í†µê³„ í…Œì´ë¸”
2. **ì§ê¸‰ë³„ ìƒì„¸**: ì§ê¸‰ë³„ ì¸ì„¼í‹°ë¸Œ í˜„í™©
3. **ê°œì¸ë³„ ìƒì„¸**: ê²€ìƒ‰/í•„í„° ê°€ëŠ¥í•œ ìƒì„¸ í…Œì´ë¸”
4. **ì¸ì„¼í‹°ë¸Œ ê¸°ì¤€**: ì¡°ê±´ ë§¤íŠ¸ë¦­ìŠ¤ í‘œì‹œ
5. **ì¡°ì§ë„**: D3.js ê¸°ë°˜ ì¡°ì§ êµ¬ì¡°
6. **ì‹œìŠ¤í…œ ê²€ì¦**: ë°ì´í„° ê²€ì¦ ê²°ê³¼

### ëª¨ë‹¬ ì‹œìŠ¤í…œ
- í†µì¼ëœ ë””ìì¸ (`unified-modal` í´ë˜ìŠ¤)
- íŒŒë€ìƒ‰ ê³„ì—´ í…Œë§ˆ (#e3f2fd â†’ #bbdefb)
- ìŠ¤í‹°í‚¤ í…Œì´ë¸” í—¤ë”
- ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼

## ğŸ”’ ë°ì´í„° ë³´ì•ˆ

### í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ
- ëª¨ë“  ë°ì´í„°ëŠ” HTMLì— ì¸ë¼ì¸ìœ¼ë¡œ í¬í•¨
- ì™¸ë¶€ API í˜¸ì¶œ ì—†ìŒ
- localStorageëŠ” ì–¸ì–´ ì„¤ì •ë§Œ ì €ì¥

### ì„œë²„ ì‚¬ì´ë“œ
- Google Drive ì„œë¹„ìŠ¤ ê³„ì • ì¸ì¦
- ë¯¼ê° ì •ë³´ëŠ” ì„œë²„ì—ì„œë§Œ ì²˜ë¦¬
- í´ë¼ì´ì–¸íŠ¸ë¡œëŠ” ì§‘ê³„ ë°ì´í„°ë§Œ ì „ì†¡

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### ë¡œë”© ìµœì í™”
- CDN ì‚¬ìš© (Bootstrap, Chart.js, D3.js)
- CSSëŠ” headì—, JSëŠ” body ëì— ë°°ì¹˜
- ë¹„ë™ê¸° ë°ì´í„° ë¡œë”© ì—†ìŒ (ëª¨ë‘ ì¸ë¼ì¸)

### ë Œë”ë§ ìµœì í™”
- Virtual DOM ì—†ì´ ì§ì ‘ DOM ì¡°ì‘
- Chart.js ì¸ìŠ¤í„´ìŠ¤ ì¬ì‚¬ìš©
- íƒ­ ì „í™˜ ì‹œ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸

### ë©”ëª¨ë¦¬ ê´€ë¦¬
- Chart ì¸ìŠ¤í„´ìŠ¤ destroy() í˜¸ì¶œ
- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì ì ˆíˆ ì œê±°
- ëŒ€ìš©ëŸ‰ ë°ì´í„°ëŠ” í˜ì´ì§€ë„¤ì´ì…˜

## ğŸ› ï¸ ìœ ì§€ë³´ìˆ˜

### ì–¸ì–´ ì¶”ê°€
1. `config_files/dashboard_translations.json` ìˆ˜ì •
2. ìƒˆ ì–¸ì–´ í‚¤ ì¶”ê°€ (ì˜ˆ: 'jp')
3. ëª¨ë“  ë²ˆì—­ í…ìŠ¤íŠ¸ ì¶”ê°€

### ì¡°ê±´ ìˆ˜ì •
1. `config_files/position_condition_matrix.json` ìˆ˜ì •
2. ì¡°ê±´ ì •ì˜ ì¶”ê°€/ìˆ˜ì •
3. ì¬ìƒì„± ì—†ì´ ì¦‰ì‹œ ì ìš©

### ìŠ¤íƒ€ì¼ ìˆ˜ì •
1. `static/css/complete_dashboard.css` ìˆ˜ì •
2. CompleteRendererë¡œ ì¬ìƒì„±
3. ë˜ëŠ” HTMLì—ì„œ ì§ì ‘ ìˆ˜ì •

## ğŸ“Š ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸

### ì„±ëŠ¥ ë©”íŠ¸ë¦­
- íŒŒì¼ í¬ê¸°: 5.6 MB (ëª©í‘œ: <6 MB)
- ë¡œë”© ì‹œê°„: ~2.5ì´ˆ (ëª©í‘œ: <3ì´ˆ)
- JavaScript ì‹¤í–‰: ~500ms
- ì²« í™”ë©´ í‘œì‹œ: ~1.5ì´ˆ

### í’ˆì§ˆ ë©”íŠ¸ë¦­
- ìë™ ê²€ì¦ í†µê³¼ìœ¨: 92.6%
- JavaScript í•¨ìˆ˜ ì»¤ë²„ë¦¬ì§€: 100%
- ì–¸ì–´ ì§€ì›: 3ê°œ (í•œ/ì˜/ë² íŠ¸ë‚¨ì–´)
- ë¸Œë¼ìš°ì € í˜¸í™˜ì„±: Chrome, Firefox, Safari, Edge

## ğŸ” íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¼ë°˜ì ì¸ ë¬¸ì œ
1. **íƒ­ ì½˜í…ì¸  ì•ˆ ë³´ì„**: CSS display:none ì¶©ëŒ í™•ì¸
2. **ì°¨íŠ¸ ê¹¨ì§**: Chart.js ì¸ìŠ¤í„´ìŠ¤ destroy í™•ì¸
3. **ì–¸ì–´ ì „í™˜ ì•ˆë¨**: updateAllTexts() ë²”ìœ„ í™•ì¸
4. **ë°ì´í„° ì—†ìŒ**: Excel íŒŒì¼ ê²½ë¡œ ë° JSON í™•ì¸

### ë””ë²„ê¹… ë„êµ¬
```javascript
// ì½˜ì†”ì—ì„œ ì‹¤í–‰
console.log(window.employeeData);  // ì§ì› ë°ì´í„° í™•ì¸
console.log(translations);         // ë²ˆì—­ ë°ì´í„° í™•ì¸
console.log(positionMatrix);      // ì¡°ê±´ ë§¤íŠ¸ë¦­ìŠ¤ í™•ì¸
```

## ğŸ“ Version History

### Version 6.0 (2025.09)
- ì™„ì „í•œ ëª¨ë“ˆí™” êµ¬ì¡° ë„ì…
- f-string ì´ìŠ¤ì¼€ì´í•‘ ë¬¸ì œ í•´ê²°
- 121ê°œ í•µì‹¬ í•¨ìˆ˜ë¡œ ìµœì í™”
- ìœ ì§€ë³´ìˆ˜ì„± ëŒ€í­ ê°œì„ 

### Version 5.0 (ì´ì „)
- 15,000+ ì¤„ ë‹¨ì¼ íŒŒì¼
- f-string ì´ìŠ¤ì¼€ì´í•‘ ë¬¸ì œë¡œ ìˆ˜ì • ì–´ë ¤ì›€
- 166ê°œ í•¨ìˆ˜
- ê¸°ëŠ¥ì€ ì™„ì „í•˜ë‚˜ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€