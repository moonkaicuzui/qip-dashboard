# 조건 7, 8 데이터 처리 개선 권장사항

## 현재 상황
- **조건 7 (팀/구역 AQL)**: 데이터 없음
- **조건 8 (담당구역 reject %)**: 데이터 없음
- MODEL MASTER, AUDIT & TRAINING 등 일부 직급은 이 조건들이 적용되어야 함

## 단기 해결책 (현재 적용)
- 적용 대상 직급에서는 "데이터 없음 (기본 통과)"로 표시
- 비적용 직급에서는 N/A로 표시

## 장기 해결책 권장사항

### 1. 팀/구역 조직도 데이터 준비
```
input_files/team_hierarchy.csv
- Employee No
- Team Leader ID
- Area Manager ID
- Department
```

### 2. Step1에서 팀/구역 reject rate 계산
```python
def calculate_team_area_reject_rate(self, team_id):
    """팀/구역의 AQL reject rate 계산"""
    # 팀 멤버들의 AQL 데이터 집계
    # reject rate 계산
    return reject_rate
```

### 3. 출력 파일에 컬럼 추가
- `team_aql_reject_rate`: 팀 AQL reject 비율
- `area_reject_rate`: 담당구역 reject 비율

### 4. Integrated Dashboard에서 데이터 로드
```python
# 팀/구역 데이터 로드
if 'team_aql_reject_rate' in df.columns:
    df['team_reject_rate'] = df['team_aql_reject_rate']
else:
    df['team_reject_rate'] = 0
    
if 'area_reject_rate' in df.columns:
    df['area_reject_rate'] = df['area_reject_rate']
else:
    df['area_reject_rate'] = 0
```

### 5. 조건 평가 로직 개선
```python
elif cond_id == 7:  # 팀/구역 AQL
    team_reject_rate = float(emp_data.get('team_reject_rate', 0))
    has_data = emp_data.get('has_team_data', False)
    if has_data:
        is_met = team_reject_rate < 3
        actual_value = f"{team_reject_rate:.1f}%"
    else:
        # 데이터 없는 경우 처리
        ...
```

## 데이터 소스 필요 항목
1. **조직도 데이터**: 팀/구역 매핑
2. **팀별 AQL 집계**: 팀 단위 reject 통계
3. **구역별 reject 데이터**: Building/Line별 reject 비율

## 예상 효과
- 모든 조건에 대한 정확한 평가 가능
- JSON 설정에 따른 올바른 인센티브 계산
- 투명하고 검증 가능한 평가 시스템