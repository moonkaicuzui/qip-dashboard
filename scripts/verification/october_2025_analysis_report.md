# 10월 2025 인센티브 보고서 문제점 분석 리포트

**분석 날짜:** 2025-10-06
**대상 기간:** 2025년 10월 (Interim Report - 3일 데이터)
**총 직원:** 506명
**인센티브 지급:** 281명 (55.5%)
**총 지급액:** ₫72,145,250

---

## 📊 요약

### ✅ 정상 항목
1. **100% 룰 준수**: 조건 통과율 100% 달성자 중에서만 인센티브 지급
2. **TYPE-3 정책 준수**: TYPE-3 직원 55명 모두 인센티브 0 VND
3. **기본 조건 평가**: 출근율, 무단결근 등 기본 조건 평가 정상 작동
4. **데이터 로딩**: Previous_Incentive는 9월 데이터와 100% 일치

### 🚨 CRITICAL 문제점

#### 1. **Continuous Months 감소 오류 (13명)**
**심각도:** 🔴 CRITICAL
**영향:** TYPE-1 직원의 인센티브 금액 부정확

연속으로 조건을 통과한 직원의 CM이 감소하는 치명적 오류 발견:

| Employee No | 이름 | 9월 CM | 10월 CM | 감소폭 | 9월 금액 | 10월 금액 |
|------------|------|--------|---------|--------|----------|-----------|
| 622080458 | NGUYỄN HỒNG CẨM | 12 | 2 | -10 | ₫1,000,000 | ₫250,000 |
| 622020913 | LÂM THỊ THU PHƯƠNG | 12 | 2 | -10 | ₫1,000,000 | ₫250,000 |
| 624100308 | NGUYỄN THỊ MỸ ANH | 10 | 2 | -8 | ₫850,000 | ₫250,000 |
| 624110228 | THỊ KIỀU XUÂN | 10 | 2 | -8 | ₫850,000 | ₫250,000 |
| 621110407 | LÊ YẾN NHI | 10 | 2 | -8 | ₫850,000 | ₫250,000 |

**예상 영향:**
- 9월에 10-12개월 달성자가 10월에 2개월로 리셋됨
- 본래 받아야 할 금액: ₫850,000 ~ ₫1,000,000
- 실제 받은 금액: ₫250,000
- **직원 1인당 ₫600,000 ~ ₫750,000 손실**

**근본 원인:**
```
Previous_CM = 9월 CM 불일치율: 87.6% (440명/502명)
→ 9월 Continuous_Months 데이터를 제대로 불러오지 못함
→ Previous_CM이 0 또는 잘못된 값으로 설정됨
→ 10월 계산 시 CM이 1 또는 2로 잘못 시작됨
```

#### 2. **Continuous Months 정체 오류 (14명)**
**심각도:** 🟠 WARNING
**영향:** 인센티브 금액 증가 누락

연속으로 조건 통과했는데 CM이 증가하지 않는 오류:

| CM 값 | 인원 | 예상 동작 | 실제 동작 |
|-------|------|-----------|-----------|
| 2개월 | 9명 | 2 → 3 | 2 → 2 (정체) |
| 7개월 | 2명 | 7 → 8 | 7 → 7 (정체) |
| 13개월 | 3명 | 13 → 14 | 13 → 13 (정체) |

**예상 영향:**
- CM이 증가했어야 하는데 정체
- 다음 달 인센티브 금액 증가 기회 상실

#### 3. **신규 시작자 CM 점프 오류 (29명)**
**심각도:** 🟡 WARNING
**영향:** 일부 직원이 부당 이득

신규로 조건 충족한 직원이 CM=1이 아닌 CM=2로 시작:

```
Previous_CM = 0
Expected_CM = 1
Actual_CM = 2  ← 잘못된 계산

예상 인센티브: ₫150,000 (1개월)
실제 인센티브: ₫250,000 (2개월)
직원 1인당 ₫100,000 초과 지급
```

---

## 📈 조건별 통과율 분석

### 출근 조건 (Attendance)

| 조건 | 설명 | PASS | FAIL | N/A | 통과율 |
|------|------|------|------|-----|--------|
| 조건 1 | 출근율 >= 88% | 372명 | 79명 | 55명 | 82.5% |
| 조건 2 | 무단결근 <= 2일 | 373명 | 0명 | 133명 | 100.0% |
| 조건 3 | 실제 출근일 > 0 | 348명 | 103명 | 55명 | 77.2% |
| 조건 4 | 최소 근무일 >= 12일 | - | - | - | N/A* |

*조건 4는 10월 Interim (3일) 보고서에서 평가 불가

### AQL 품질 조건

| 조건 | 설명 | PASS | FAIL | N/A | 통과율 |
|------|------|------|------|-----|--------|
| 조건 5 | 개인 AQL 불량 = 0 | 123명 | 2명 | 381명 | 98.4% |
| 조건 6 | AQL 3개월 연속 불량 없음 | 119명 | 0명 | 387명 | 100.0% |
| 조건 7 | 팀/구역 AQL 3개월 연속 불량 없음 | 16명 | 0명 | 490명 | 100.0% |
| 조건 8 | 구역 리젝률 < 3% | 10명 | 1명 | 495명 | 90.9% |

### 5PRS 검사 조건

| 조건 | 설명 | PASS | FAIL | N/A | 통과율 |
|------|------|------|------|-----|--------|
| 조건 9 | 5PRS 합격률 >= 95% | 90명 | 29명 | 387명 | 75.6% |
| 조건 10 | 5PRS 검사량 >= 100 | 45명 | 74명 | 387명 | 37.8% |

**관찰:**
- 조건 10 (5PRS 검사량 >= 100)의 통과율이 37.8%로 매우 낮음
- 3일 Interim 기간 동안 100개 이상 검사하기 어려운 것으로 보임

---

## 💰 TYPE별 인센티브 분석

| TYPE | 인원 | 총액 | 평균 | 최대 |
|------|------|------|------|------|
| TYPE-1 | 152명 | ₫21,594,441 | ₫142,069 | ₫2,600,000 |
| TYPE-2 | 299명 | ₫50,550,809 | ₫169,066 | ₫483,000 |
| TYPE-3 | 55명 | ₫0 | ₫0 | ₫0 |

### Continuous Months 분포 (TYPE-1)

| CM | 인원 | 총액 | 평균 |
|----|------|------|------|
| 1개월 | 14명 | ₫2,100,000 | ₫150,000 |
| 2개월 | 29명 | ₫7,250,000 | ₫250,000 |
| 7개월 | 2명 | ₫3,400,000 | ₫1,700,000 |
| 13개월 | 3명 | ₫7,800,000 | ₫2,600,000 |

**⚠️ 문제점:**
- CM 3-6개월, 8-12개월 구간이 완전히 비어있음
- 위의 CRITICAL 문제 (CM 감소)의 영향으로 보임

---

## 🔍 근본 원인 분석

### 1. Previous Data 로딩 실패

```python
# 검증 결과
Previous_Incentive vs 9월 Final Incentive: 100.0% 일치 ✅
Previous_CM vs 9월 CM: 12.4% 일치 ❌ (440명 불일치)
```

**원인:**
- `assembly_inspector_continuous_months.json` 파일이 제대로 업데이트되지 않음
- 또는 10월 계산 시 이 파일을 제대로 읽어오지 못함

### 2. Continuous Months 계산 로직 오류

**예상 로직:**
```
IF 조건 100% 통과:
    IF Previous_CM exists:
        Continuous_Months = Previous_CM + 1
    ELSE:
        Continuous_Months = 1
ELSE:
    Continuous_Months = 0
```

**실제 동작:**
```
Previous_CM 데이터 손실 또는 부정확
→ 일부는 0으로 시작 (신규)
→ 일부는 임의의 숫자 (2, 7, 13 등)
→ CM 감소/정체/점프 오류 발생
```

---

## ✅ 권장 조치사항

### 🚨 긴급 (Immediate)

1. **10월 인센티브 재계산 필수**
   ```bash
   # 1. 9월 데이터를 assembly_inspector_continuous_months.json에 제대로 업데이트
   # 2. 10월 인센티브 재계산
   python src/step1_인센티브_계산_개선버전.py --month october --year 2025
   ```

2. **CM 감소 케이스 13명 긴급 보정**
   - 622080458 (NGUYỄN HỒNG CẨM): CM 12 → 13, 인센티브 ₫250,000 → ₫1,050,000
   - 622020913 (LÂM THỊ THU PHƯƠNG): CM 12 → 13, 인센티브 ₫250,000 → ₫1,050,000
   - ... (나머지 11명도 동일하게 보정)

3. **영향 받은 직원 통보 및 차액 지급**
   - CM 감소 케이스: 13명 × 평균 ₫650,000 = **₫8,450,000 추가 지급 필요**
   - CM 정체 케이스: 14명 × 영향 미미 (다음 달 영향)
   - CM 점프 케이스: 29명 × ₫100,000 = **₫2,900,000 회수 검토**

### 📋 단기 (This Week)

4. **assembly_inspector_continuous_months.json 검증 프로세스 추가**
   ```python
   # 매월 계산 전 검증:
   # - 이전 달 CSV의 CM과 JSON 파일의 CM이 일치하는지 확인
   # - 불일치 시 경고 메시지 출력 및 계산 중단
   ```

5. **Continuous Months 계산 로직 보강**
   - Previous_CM이 없을 때 명확한 처리 (기본값 0)
   - Previous_CM > 현재 CM인 경우 에러 발생 및 중단
   - 로그에 CM 변화 추적 (예: "621060243: 3 → 4")

6. **자동 검증 스크립트 추가**
   ```bash
   # 매월 계산 후 자동 실행
   python scripts/verification/validate_continuous_months.py october 2025

   # 검증 항목:
   # - CM 감소 케이스 0건
   # - Previous_CM vs 이전 달 CM 일치율 100%
   # - CM 분포 연속성 (1-15개월 모두 존재)
   ```

### 🔧 중기 (This Month)

7. **검증 스크립트 호환성 수정**
   - 컬럼명 변경 반영: `ID No` → `Employee No`, `YES/NO` → `PASS/FAIL`
   - 9월/10월 모두 호환되도록 수정

8. **데이터 무결성 체크 강화**
   - action.sh에 자동 검증 단계 추가
   - 검증 실패 시 대시보드 생성 중단

9. **Interim Report 특수 처리**
   - 조건 4 (최소 12일) 평가 skip 로직 명확화
   - 조건 10 (5PRS >= 100) 임계값 조정 검토

---

## 📊 데이터 품질 점수

### 현재 점수: 55/100

**점수 산정:**
- CRITICAL 문제 3건: -30점
- WARNING 문제 2건: -15점
- 기본 동작 정상: +100점
- **최종: 55/100 (미흡)**

### 목표 점수: 95/100

**개선 후 예상:**
- CRITICAL 문제 해결: +30점
- WARNING 문제 해결: +15점
- **최종: 100/100 (우수)**

---

## 📝 체크리스트

### 10월 재계산 전 확인사항

- [ ] 9월 CSV 파일에서 CM 데이터 추출
- [ ] assembly_inspector_continuous_months.json 업데이트
- [ ] Previous_CM = 9월 CM 100% 일치 확인
- [ ] 10월 인센티브 재계산 실행
- [ ] CM 감소 케이스 0건 확인
- [ ] CM 분포 연속성 확인 (1-15개월)
- [ ] 영향 받은 직원 리스트 작성
- [ ] 차액 지급 계획 수립

### 향후 월별 계산 시 필수 검증

- [ ] Previous data 일치율 100% 확인
- [ ] CM 감소 케이스 0건 확인
- [ ] 100% 룰 준수 확인
- [ ] TYPE-3 정책 준수 확인
- [ ] 자동 검증 스크립트 실행
- [ ] 검증 리포트 검토 후 대시보드 생성

---

**분석 완료**
*생성일: 2025-10-06*
*분석 도구: Python 3.9 + pandas*
*데이터 소스: output_QIP_incentive_october_2025_Complete_V8.01_Complete.csv*
