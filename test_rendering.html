<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Test Rendering</title>
</head>
<body>
    <h1>Test Employee 619020468 (TYPE-1 LINE LEADER)</h1>
    <div id="result"></div>
    
    <script>
        // Sample employee data for 619020468
        const employee = {
            "emp_no": "619020468",
            "name": "THỊ MY", 
            "position": "LINE LEADER",
            "type": "TYPE-1",
            "metadata": {
                "position_info": {"type": "TYPE-1", "position": "LINE LEADER"},
                "condition_groups": {
                    "attendance": {"name": "출근 조건", "applicable_count": 4, "total_count": 4},
                    "aql": {"name": "AQL 조건", "applicable_count": 1, "total_count": 4},
                    "5prs": {"name": "5PRS 조건", "applicable_count": 0, "total_count": 2}
                },
                "display_config": {"show_empty_groups": false}
            }
        };
        
        // Check metadata
        const result = document.getElementById('result');
        
        result.innerHTML = `
            <h2>Metadata Check:</h2>
            <p>Has metadata: ${employee.metadata ? 'YES' : 'NO'}</p>
            <p>Has condition_groups: ${employee.metadata && employee.metadata.condition_groups ? 'YES' : 'NO'}</p>
            
            <h3>Condition Groups:</h3>
            <ul>
                <li>Attendance: ${employee.metadata.condition_groups.attendance.applicable_count} applicable</li>
                <li>AQL: ${employee.metadata.condition_groups.aql.applicable_count} applicable</li>
                <li>5PRS: ${employee.metadata.condition_groups.5prs.applicable_count} applicable</li>
            </ul>
            
            <h3>Should render:</h3>
            <ul>
                <li>Attendance: YES (4 conditions)</li>
                <li>AQL: YES (1 condition - only condition 7)</li>
                <li>5PRS: NO (0 conditions, show_empty_groups=false)</li>
            </ul>
            
            <h3>Dynamic rendering test:</h3>
        `;
        
        // Test the logic
        const groupOrder = ['attendance', 'aql', '5prs'];
        let rendered = [];
        
        groupOrder.forEach(groupKey => {
            const group = employee.metadata.condition_groups[groupKey];
            if (group) {
                if (group.applicable_count === 0 && !employee.metadata.display_config?.show_empty_groups) {
                    rendered.push(`${groupKey}: SKIPPED (no applicable conditions)`);
                } else {
                    rendered.push(`${groupKey}: RENDERED (${group.applicable_count} conditions)`);
                }
            }
        });
        
        result.innerHTML += `<ul>${rendered.map(r => `<li>${r}</li>`).join('')}</ul>`;
    </script>
</body>
</html>